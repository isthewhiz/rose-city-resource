{"ast":null,"code":"import L from 'leaflet';\nimport { getJSON } from '../util';\nexport var HERE = L.Class.extend({\n  options: {\n    geocodeUrl: 'https://geocoder.api.here.com/6.2/geocode.json',\n    reverseGeocodeUrl: 'https://reverse.geocoder.api.here.com/6.2/reversegeocode.json',\n    app_id: '<insert your app_id here>',\n    app_code: '<insert your app_code here>',\n    geocodingQueryParams: {},\n    reverseQueryParams: {},\n    reverseGeocodeProxRadius: null\n  },\n  initialize: function (options) {\n    L.setOptions(this, options);\n  },\n  geocode: function (query, cb, context) {\n    var params = {\n      searchtext: query,\n      gen: 9,\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      jsonattributes: 1\n    };\n    params = L.Util.extend(params, this.options.geocodingQueryParams);\n    this.getJSON(this.options.geocodeUrl, params, cb, context);\n  },\n  reverse: function (location, scale, cb, context) {\n    var _proxRadius = this.options.reverseGeocodeProxRadius ? this.options.reverseGeocodeProxRadius : null;\n\n    var proxRadius = _proxRadius ? ',' + encodeURIComponent(_proxRadius) : '';\n    var params = {\n      prox: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng) + proxRadius,\n      mode: 'retrieveAddresses',\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      gen: 9,\n      jsonattributes: 1\n    };\n    params = L.Util.extend(params, this.options.reverseQueryParams);\n    this.getJSON(this.options.reverseGeocodeUrl, params, cb, context);\n  },\n  getJSON: function (url, params, cb, context) {\n    getJSON(url, params, function (data) {\n      var results = [],\n          loc,\n          latLng,\n          latLngBounds;\n\n      if (data.response.view && data.response.view.length) {\n        for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n          loc = data.response.view[0].result[i].location;\n          latLng = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n          latLngBounds = L.latLngBounds(L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude), L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude));\n          results[i] = {\n            name: loc.address.label,\n            properties: loc.address,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n      }\n\n      cb.call(context, results);\n    });\n  }\n});\nexport function here(options) {\n  return new HERE(options);\n}","map":{"version":3,"sources":["/home/isnardo/rcr/rose-city-resource/client/node_modules/leaflet-control-geocoder/src/geocoders/here.js"],"names":["L","getJSON","HERE","Class","extend","options","geocodeUrl","reverseGeocodeUrl","app_id","app_code","geocodingQueryParams","reverseQueryParams","reverseGeocodeProxRadius","initialize","setOptions","geocode","query","cb","context","params","searchtext","gen","jsonattributes","Util","reverse","location","scale","_proxRadius","proxRadius","encodeURIComponent","prox","lat","lng","mode","url","data","results","loc","latLng","latLngBounds","response","view","length","i","result","displayPosition","latitude","longitude","mapView","topLeft","bottomRight","name","address","label","properties","bbox","center","call","here"],"mappings":"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","sourcesContent":["import L from 'leaflet';\nimport { getJSON } from '../util';\nexport var HERE = L.Class.extend({\n  options: {\n    geocodeUrl: 'https://geocoder.api.here.com/6.2/geocode.json',\n    reverseGeocodeUrl: 'https://reverse.geocoder.api.here.com/6.2/reversegeocode.json',\n    app_id: '<insert your app_id here>',\n    app_code: '<insert your app_code here>',\n    geocodingQueryParams: {},\n    reverseQueryParams: {},\n    reverseGeocodeProxRadius: null\n  },\n  initialize: function(options) {\n    L.setOptions(this, options);\n  },\n  geocode: function(query, cb, context) {\n    var params = {\n      searchtext: query,\n      gen: 9,\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      jsonattributes: 1\n    };\n    params = L.Util.extend(params, this.options.geocodingQueryParams);\n    this.getJSON(this.options.geocodeUrl, params, cb, context);\n  },\n  reverse: function(location, scale, cb, context) {\n    var _proxRadius = this.options.reverseGeocodeProxRadius\n      ? this.options.reverseGeocodeProxRadius\n      : null;\n    var proxRadius = _proxRadius ? ',' + encodeURIComponent(_proxRadius) : '';\n    var params = {\n      prox: encodeURIComponent(location.lat) + ',' + encodeURIComponent(location.lng) + proxRadius,\n      mode: 'retrieveAddresses',\n      app_id: this.options.app_id,\n      app_code: this.options.app_code,\n      gen: 9,\n      jsonattributes: 1\n    };\n    params = L.Util.extend(params, this.options.reverseQueryParams);\n    this.getJSON(this.options.reverseGeocodeUrl, params, cb, context);\n  },\n  getJSON: function(url, params, cb, context) {\n    getJSON(url, params, function(data) {\n      var results = [],\n        loc,\n        latLng,\n        latLngBounds;\n      if (data.response.view && data.response.view.length) {\n        for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n          loc = data.response.view[0].result[i].location;\n          latLng = L.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n          latLngBounds = L.latLngBounds(\n            L.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude),\n            L.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude)\n          );\n          results[i] = {\n            name: loc.address.label,\n            properties: loc.address,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n      }\n      cb.call(context, results);\n    });\n  }\n});\nexport function here(options) {\n  return new HERE(options);\n}\n"]},"metadata":{},"sourceType":"module"}