{"ast":null,"code":"var _jsxFileName = \"/home/isnardo/rcr/rose-city-resource/client/src/components/App.js\";\nimport React from \"react\";\nimport Loading from \"./Loading\";\nimport Home from \"./Home/Home\";\nimport About from \"./About\";\nimport SuggestEdit from \"./SuggestEdit\";\nimport Results from \"./Results/Results\";\nimport Details from \"./Details\";\nimport Nav from \"./Navbar/Nav\";\nimport Footer from \"./Footer/Footer\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport { getNodeData, getPackageData, getCategorySearchData, getMainSearchData, dateString } from \"../utils/api\";\nimport \"../icons/iconsInit\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      navDrawerVisible: false,\n      nodeData: null,\n      searchData: null,\n      savedDataId: []\n    };\n\n    this.handleCardSave = id => {\n      const {\n        savedDataId\n      } = this.state; // console.log('current saved state: ', savedDataId);\n\n      if (savedDataId.indexOf(id) === -1) {\n        //build up the state array without directly mutating state\n        this.setState(prevState => ({\n          savedDataId: [...prevState.savedDataId, id]\n        }));\n      } else {\n        const filterArr = savedDataId.filter(item => item !== id);\n        this.setState(() => ({\n          savedDataId: filterArr\n        }));\n      }\n    };\n\n    this.handleSaveDelete = () => {\n      this.setState(() => ({\n        savedDataId: []\n      }));\n    };\n\n    this.filterData = nodeData => {\n      const generalCategories = getCategorySearchData(nodeData, \"general_category\");\n      const parentCategories = getCategorySearchData(nodeData, \"parent_organization\");\n      const mainCategories = getMainSearchData(nodeData); // return a new object with the search data\n\n      return {\n        general: generalCategories,\n        main: mainCategories,\n        parent: parentCategories\n      };\n    };\n\n    this.handleDrawer = () => this.setState(prev => ({\n      navDrawerVisible: !prev.navDrawerVisible\n    }));\n\n    this.componentDidMount = async () => {\n      // window.addEventListener('resize', this.resize);\n      //package/revision data\n      const packageData = await getPackageData();\n      this.revisionDate = dateString( // packageData.result.results[0].metadata_modified\n      packageData.result.metadata_modified); //nodeData\n\n      const nodeData = await getNodeData();\n      const searchData = this.filterData(nodeData);\n      console.log(searchData);\n      this.setState(() => ({\n        nodeData,\n        searchData\n      }));\n    };\n  }\n\n  render() {\n    const {\n      nodeData,\n      searchData,\n      savedDataId\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, !nodeData ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Nav, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: props => /*#__PURE__*/React.createElement(Home, Object.assign({}, props, {\n        nodeData: nodeData,\n        searchData: searchData,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 23\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/about\",\n      component: About,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/suggest-edit\",\n      component: SuggestEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/results\",\n      component: props => /*#__PURE__*/React.createElement(Results, Object.assign({}, props, {\n        nodeData: nodeData,\n        searchData: searchData,\n        handleCardSave: this.handleCardSave,\n        handleSaveDelete: this.handleSaveDelete,\n        savedDataId: savedDataId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 23\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/details\",\n      component: props => /*#__PURE__*/React.createElement(Details, Object.assign({}, props, {\n        nodeData: nodeData,\n        handleCardSave: this.handleCardSave,\n        savedDataId: savedDataId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 23\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      render: () => /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 40\n        }\n      }, \"Not Found\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Footer, {\n      revisionDate: this.revisionDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/isnardo/rcr/rose-city-resource/client/src/components/App.js"],"names":["React","Loading","Home","About","SuggestEdit","Results","Details","Nav","Footer","BrowserRouter","Router","Route","Switch","getNodeData","getPackageData","getCategorySearchData","getMainSearchData","dateString","App","Component","state","navDrawerVisible","nodeData","searchData","savedDataId","handleCardSave","id","indexOf","setState","prevState","filterArr","filter","item","handleSaveDelete","filterData","generalCategories","parentCategories","mainCategories","general","main","parent","handleDrawer","prev","componentDidMount","packageData","revisionDate","result","metadata_modified","console","log","render","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Loading from \"./Loading\";\nimport Home from \"./Home/Home\";\nimport About from \"./About\";\nimport SuggestEdit from \"./SuggestEdit\";\nimport Results from \"./Results/Results\";\nimport Details from \"./Details\";\nimport Nav from \"./Navbar/Nav\";\nimport Footer from \"./Footer/Footer\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport {\n  getNodeData,\n  getPackageData,\n  getCategorySearchData,\n  getMainSearchData,\n  dateString,\n} from \"../utils/api\";\nimport \"../icons/iconsInit\";\n\nclass App extends React.Component {\n  //data lives in the top component.\n  state = {\n    navDrawerVisible: false,\n    nodeData: null,\n    searchData: null,\n    savedDataId: [],\n  };\n\n  //state lisfted from\n  //Cards to keep track of saved cards\n  //this may need to be moved down to results\n  handleCardSave = (id) => {\n    const { savedDataId } = this.state;\n    // console.log('current saved state: ', savedDataId);\n    if (savedDataId.indexOf(id) === -1) {\n      //build up the state array without directly mutating state\n      this.setState((prevState) => ({\n        savedDataId: [...prevState.savedDataId, id],\n      }));\n    } else {\n      const filterArr = savedDataId.filter((item) => item !== id);\n      this.setState(() => ({ savedDataId: filterArr }));\n    }\n  };\n\n  handleSaveDelete = () => {\n    this.setState(() => ({ savedDataId: [] }));\n  };\n  // build the searching data\n  filterData = (nodeData) => {\n    const generalCategories = getCategorySearchData(\n      nodeData,\n      \"general_category\"\n    );\n    const parentCategories = getCategorySearchData(\n      nodeData,\n      \"parent_organization\"\n    );\n    const mainCategories = getMainSearchData(nodeData);\n    // return a new object with the search data\n    return {\n      general: generalCategories,\n      main: mainCategories,\n      parent: parentCategories,\n    };\n  };\n\n  handleDrawer = () =>\n    this.setState((prev) => ({\n      navDrawerVisible: !prev.navDrawerVisible,\n    }));\n\n  componentDidMount = async () => {\n    // window.addEventListener('resize', this.resize);\n    //package/revision data\n    const packageData = await getPackageData();\n    this.revisionDate = dateString(\n      // packageData.result.results[0].metadata_modified\n      packageData.result.metadata_modified\n    );\n\n    //nodeData\n    const nodeData = await getNodeData();\n    const searchData = this.filterData(nodeData);\n    console.log(searchData)\n    this.setState(() => ({ nodeData, searchData }));\n  };\n\n  render() {\n    const { nodeData, searchData, savedDataId } = this.state;\n    return (\n      <React.Fragment>\n        {!nodeData ? (\n          <Loading />\n        ) : (\n          <Router>\n            <div>\n              <div className=\"main-content\">\n                <Nav />\n                <Switch>\n                  <Route\n                    exact\n                    path=\"/\"\n                    component={(props) => (\n                      <Home\n                        {...props}\n                        nodeData={nodeData}\n                        searchData={searchData}\n                      />\n                    )}\n                  />\n                  <Route exact path=\"/about\" component={About} />\n                  <Route exact path=\"/suggest-edit\" component={SuggestEdit} />\n                  <Route\n                    path=\"/results\"\n                    component={(props) => (\n                      <Results\n                        {...props}\n                        nodeData={nodeData}\n                        searchData={searchData}\n                        handleCardSave={this.handleCardSave}\n                        handleSaveDelete={this.handleSaveDelete}\n                        savedDataId={savedDataId}\n                      />\n                    )}\n                  />\n                  <Route\n                    exact\n                    path=\"/details\"\n                    component={(props) => (\n                      <Details\n                        {...props}\n                        nodeData={nodeData}\n                        handleCardSave={this.handleCardSave}\n                        savedDataId={savedDataId}\n                      />\n                    )}\n                  />\n\n                  {/* for all other routes */}\n                  <Route render={() => <p>Not Found</p>} />\n                </Switch>\n              </div>\n              <Footer revisionDate={this.revisionDate} />\n            </div>\n          </Router>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}